"use strict";!function(){var e=!1,t=getUrlPar("phone"),s=decodeURIComponent(getUrlPar("car")),o={};t&&s?function t(s,o){e||(showLoad(),e=!0,goAPI({url:_api.car_detail_chemama,data:s,success:function(e){$.isFunction(o)&&o(e)},error:function(e){showConfirm({str:e,btn_yes:{str:"重新加载",event_click:function(){t(s,o)}}})},complete:function(){hideLoad(),e=!1}}))}({mobileNumber:t,licensePlateNumber:s},function(i){if(i=i.data,$(".container").html(juicer($("#main-tpl").html(),i)),_config.is_wx&&!_config.wx_config&&configWXJSSDK(["chooseImage","uploadImage"].concat(_config.wx_share),{success:function(){}}),i.carPhotos){var n=JSON.parse(i.carPhotos);n.qd&&$("#img-qd").insertImg(n.qd,"fix").closest(".btn-upload").removeClass("default"),n.zh&&$("#img-zh").insertImg(n.zh,"fix").closest(".btn-upload").removeClass("default"),n.yh&&$("#img-yh").insertImg(n.yh,"fix").closest(".btn-upload").removeClass("default"),n.zq&&$("#img-zq").insertImg(n.zq,"fix").closest(".btn-upload").removeClass("default"),n.yq&&$("#img-yq").insertImg(n.yq,"fix").closest(".btn-upload").removeClass("default"),n.zc&&$("#img-zc").insertImg(n.zc,"fix").closest(".btn-upload").removeClass("default"),n.yc&&$("#img-yc").insertImg(n.yc,"fix").closest(".btn-upload").removeClass("default")}$(".btn-upload").on("click",function(){if(_config.is_wx_mobile)if(_config.wx_config){var e=$(this);wx.chooseImage({count:1,sizeType:["compressed"],sourceType:["camera"],success:function(t){var s=t.localIds;wxUploadPhoto({localId:s[0],success:function(t){var i=t.serverId;e.removeClass("default").find(".upload-img").empty().insertImg(s[0],"fix"),o[e.data("value")]=i}})}})}else showAlert("正在调用摄像头...请稍后再点击");else showAlert("请在微信客户端中上传照片")}),$("#btn-confirm").on("click",function(){var i,n=$("#img-qd img"),a=$("#img-yq img"),c=$("#img-yc img"),l=$("#img-yh img"),r=$("#img-zh img"),m=$("#img-zc img"),h=$("#img-zq img");0!==n.length?0!==a.length?0!==c.length?0!==l.length?0!==r.length?0!==m.length?0!==h.length?($(".btn-upload").each(function(){var e=$(this),t=e.find(".upload-img img").eq(0).attr("src");/^http/.test(t)&&(o[e.data("value")]="null")}),i={licensePlateNumber:s,mobileNumber:t,base:[o.zh,o.yh,o.zq,o.yq,o.qd,o.zc,o.yc]},e||(showLoad(),e=!0,goAPI({url:_api.add_car_chemama,data:i,traditional:!0,success:function(e){showConfirm({class:"success",title:"您的"+s+"车辆信息\n提交成功！",str:"我们将在一个工作日内完成车辆审核，请留意信息，车V互助因为您的支持将更加强大",btn_yes:{str:"我知道了",href:"/hfive/view/index.html"}})},error:function(e){showConfirm({class:"fail",title:"您的"+s+"车辆信息提交失败！\n请重新提交",str:"失败原因："+e,btn_yes:{str:"我知道了"}})},complete:function(){hideLoad(),e=!1}}))):showAlert("请上传车辆左前45度的照片"):showAlert("请上传车辆左侧的照片"):showAlert("请上传车辆左后45度的照片"):showAlert("请上传车辆右后45度的照片"):showAlert("请上传车辆右侧的照片"):showAlert("请上传车辆右前45度的照片"):showAlert("请上传车辆前挡的照片")})}):showConfirm({str:"缺少必要参数",btn_yes:{str:"返回上一页",href:"javascript:history.go(-1);"},btn_no:{str:"回到首页",href:"/hfive/view/index.html"}})}();