function tabbox(t){var e={container:null,height:300,dis:50,duration:300,wheel:60,pull_dis:100,pull:!1,exception_class:"",event_pullMove:null,event_pullEnd:null,event_scroll:null,event_scrollEnd:null,event_scrollBottom:null,event_switch:null},n=$.extend({},e,t);if(!n.container)return null;var a=$(n.container);if(0===a.length)return null;("number"!==$.type(n.dis)||n.dis<0)&&(n.dis=e.dis),"number"!==$.type(n.duration)?n.dis=e.dis:n.duration<0&&(n.duration=0),$.isFunction(n.event_pullMove)||(n.event_pullMove=null),$.isFunction(n.event_pullEnd)||(n.event_pullEnd=null),$.isFunction(n.event_scroll)||(n.event_scroll=null),$.isFunction(n.event_scrollEnd)||(n.event_scrollEnd=null),$.isFunction(n.event_scrollBottom)||(n.event_scrollBottom=null),$.isFunction(n.event_switch)||(n.event_switch=null);var l=a.eq(0),s=l.find(".tabbox-layer:eq(0)"),r=s.find(".tabbox-tab"),o=-1,i=!1,h=0,c=0,u=0,v=0,w=0,f=0,_=[],p=0,d=[],m=1,g=1,b=0,Y=0,x=0,X=0,D=0,Z=!0,q=[],k=!1;if(r.each(function(){_.push(0),d.push(0)}),"boolean"===$.type(n.pull))r.each(function(){q.push(n.pull)});else if($.isArray(n.pull))for(var B=0,M=r.length;B<M;B++)"boolean"===$.type(n.pull[B])?q.push(n.pull[B]):q.push(!1);else r.each(function(){q.push(!1)});return l.css({height:n.height}).on("touchstart",function(t){c=t.touches?t.touches[0].pageX:t.pageX,u=t.touches?t.touches[0].pageY:t.pageY,w=u,D=u,X=Date.now(),x=Date.now(),Z=!0,k=!1}).on("touchmove",function(t){if(!i)if(t.preventDefault(),v=t.touches?t.touches[0].pageX:t.pageX,w=t.touches?t.touches[0].pageY:t.pageY,(n.exception_class&&$(t.target).closest(n.exception_class).length>0||r.length>1)&&0===b&&Math.abs(w-u)<10&&Math.abs(v-c)>=10?b=-1:(!n.exception_class&&1===r.length&&Math.abs(w-u)>0||0===b&&Math.abs(w-u)>=10)&&(b=1),-1===b)m=v-c>0?1:-1,(p=f+(v-c))>0?p=0:p<-l.width()*(r.length-1)&&(p=-l.width()*(r.length-1)),s.css({"webkit-transform":"translateX("+p+"px) translateY(0) translateZ(0)",transform:"translateX("+p+"px) translateY(0) translateZ(0)"});else{g=w-u>0?1:o,d[h]=_[h]+(w-u),d[h]>0?q[h]?(d[h]=Math.round(.3*d[h]),d[h]>n.pull_dis&&(d[h]=n.pull_dis),n.event_pullMove&&n.event_pullMove(d[h],h),k=!0):d[h]=0:d[h]<0&&(r.eq(h).height()<=l.height()?(d[h]=0,g===o&&n.event_scrollBottom&&Date.now()-x>100&&(x=Date.now(),n.event_scrollBottom(h,0))):l.height()-r.eq(h).height()>d[h]&&(d[h]=l.height()-r.eq(h).height(),g===o&&n.event_scrollBottom&&Date.now()-x>100&&(x=Date.now(),n.event_scrollBottom(h,-d[h])))),n.event_scroll&&Date.now()-Y>100&&(Y=Date.now(),n.event_scroll(h,-d[h],g)),r.eq(h).css({"webkit-transform":"translateX(0) translateY("+d[h]+"px) translateZ(0)",transform:"translateX(0) translateY("+d[h]+"px) translateZ(0)"});var e=Date.now();Z=!0,e-X>300&&(X=e,D=w)}}).on("touchend",function(){var t,e,a,c,u;if(!i)if(-1===b){var v=h;-1===m?(h=Math.floor(-p/l.width()),-p%l.width()>=n.dis&&h<r.length-1&&(h+=1)):(h=r.length-1-Math.floor((l.width()*(r.length-1)+p)/l.width()),(l.width()*(r.length-1)+p)%l.width()>=n.dis&&h>0&&(h-=1)),p=-l.width()*h,i=!0,s.css({transition:"webkit-transform "+n.duration/1e3+"s",transition:"transform "+n.duration/1e3+"s","webkit-transform":"translateX("+p+"px) translateY(0) translateZ(0)",transform:"translateX("+p+"px) translateY(0) translateZ(0)"}),setTimeout(function(){s.css({transition:"none","webkit-transform":"translateX("+100*-h+"%) translateY(0) translateZ(0)",transform:"translateX("+100*-h+"%) translateY(0) translateZ(0)"}),i=!1,f=p,b=0,v!==h&&n.event_switch&&n.event_switch(h,v)},n.duration)}else{var $=Date.now();Z=!1,t=(w-D)/($-X),e=$,a=d[h],u=5e-4*(c=t>0?-1:1),function s(){if(!Z){var i=Date.now(),v=i-e,w=t+v*u,f=(t+w)/2*v;if(d[h]=a+f,c*w>=0||d[h]>0||l.height()-r.eq(h).height()>d[h])return d[h]>0?(q[h]&&k&&n.event_pullEnd&&n.event_pullEnd(d[h],h),d[h]=0):r.eq(h).height()<=l.height()?d[h]=0:l.height()-r.eq(h).height()>d[h]&&(d[h]=l.height()-r.eq(h).height(),g===o&&n.event_scrollBottom&&Date.now()-x>100&&(x=Date.now(),n.event_scrollBottom(h,-d[h]))),n.event_scroll&&Date.now()-Y>100&&(Y=Date.now(),n.event_scroll(h,-d[h],g)),n.event_scrollEnd&&setTimeout(function(){n.event_scrollEnd(h,-d[h],g)},50),r.eq(h).css({"webkit-transform":"translateX(0) translateY("+d[h]+"px) translateZ(0)",transform:"translateX(0) translateY("+d[h]+"px) translateZ(0)"}),_[h]=d[h],b=0,void(Z=!0);n.event_scroll&&Date.now()-Y>100&&(Y=Date.now(),n.event_scroll(h,-d[h],g)),r.eq(h).css({"webkit-transform":"translateX(0) translateY("+d[h]+"px) translateZ(0)",transform:"translateX(0) translateY("+d[h]+"px) translateZ(0)"}),_[h]=d[h],setTimeout(s,10)}}()}}).on("mousewheel",function(t){-120===t.wheelDeltaY?(g=o,d[h]=_[h]-n.wheel):120===t.wheelDeltaY&&(g=1,d[h]=_[h]+n.wheel),d[h]>0?d[h]=0:d[h]<0&&(r.eq(h).height()<=l.height()?(d[h]=0,g===o&&n.event_scrollBottom&&Date.now()-x>100&&(x=Date.now(),n.event_scrollBottom(h,0))):l.height()-r.eq(h).height()>d[h]&&(d[h]=l.height()-r.eq(h).height(),g===o&&n.event_scrollBottom&&Date.now()-x>100&&(x=Date.now(),n.event_scrollBottom(h,-d[h])))),n.event_scroll&&n.event_scroll(h,-d[h],g),n.event_scrollEnd&&n.event_scrollEnd(h,-d[h],g),r.eq(h).css({"webkit-transform":"translateX(0) translateY("+d[h]+"px) translateZ(0)",transform:"translateX(0) translateY("+d[h]+"px) translateZ(0)"}),_[h]=d[h]}),{activeTab:function(){return r.eq(h)},switchTo:function(t,e){if(t<r.length){var a=$.extend({animation:!0,event:!1},e);h!==t?a.animation?(i=!0,s.css({transition:"webkit-transform "+n.duration/1e3+"s",transition:"transform "+n.duration/1e3+"s","webkit-transform":"translateX("+100*-t+"%) translateY(0) translateZ(0)",transform:"translateX("+100*-t+"%) translateY(0) translateZ(0)"}),setTimeout(function(){s.css({transition:"none"}),i=!1,f=-l.width()*t,n.event_switch&&n.event_switch(t,h),h=t},n.duration)):(s.css({"webkit-transform":"translateX("+100*-t+"%) translateY(0) translateZ(0)",transform:"translateX("+100*-t+"%) translateY(0) translateZ(0)"}),f=-l.width()*t,n.event_switch&&n.event_switch(t,h),h=t):a.event&&n.event_switch&&n.event_switch(t,h)}},scrollTo:function(t,e,n){if(t<r.length){var a=$.extend({animation:!1},n);Z=!0,a.animation?(o=300,i=(s=-e)>d[l=t]?1:-1,h=Math.ceil((s-d[l])/o*20),(c=function(){var t=d[l]+h;(1===i&&t>s||-1===i&&t<s)&&(t=s),d[l]=t,_[l]=t,r.eq(l).css({"webkit-transform":"translateX(0) translateY("+d[l]+"px) translateZ(0)",transform:"translateX(0) translateY("+d[l]+"px) translateZ(0)"}),t!==s&&setTimeout(c,20)})()):(d[t]=-e,_[t]=-e,r.eq(t).css({"webkit-transform":"translateX(0) translateY("+d[t]+"px) translateZ(0)",transform:"translateX(0) translateY("+d[t]+"px) translateZ(0)"}))}var l,s,o,i,h,c}}}