<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.zccbh.demand.mapper.customer.InvitationTempMapper">
    <insert id="saveSingle" parameterType="java.util.Map" useGeneratedKeys="true" keyProperty="id">
        insert into cbh_invitation_temp
        <trim prefix="(" suffix=")" suffixOverrides=",">
            originType,
            <if test="customerId != null  and customerId != ''">customerId,</if>
            <if test="shopId != null  and shopId != ''">shopId,</if>
            invitedCustomerOpenID,
            <if test="modelId != null  and modelId != ''">modelId,</if>
            <if test="status != null">status,</if>
            <if test="createAt != null">createAt,</if>
        </trim>
        <trim prefix="values (" suffix=")" suffixOverrides=",">
            #{originType,jdbcType=INTEGER},
            <if test="customerId != null  and customerId != ''">#{customerId,jdbcType=INTEGER},</if>
            <if test="shopId != null  and shopId != ''">#{shopId,jdbcType=INTEGER},</if>
            #{invitedCustomerOpenID,jdbcType=VARCHAR},
            <if test="modelId != null  and modelId != ''">#{modelId,jdbcType=INTEGER},</if>
            <if test="status != null">#{status,jdbcType=INTEGER},</if>
            <if test="createAt != null">#{createAt,jdbcType=DATETIME},</if>
        </trim>
    </insert>

    <update id="updateModel" parameterType="java.util.Map">
        UPDATE cbh_invitation_temp
        <set>
             <if test="invitedCustomerId != null  and invitedCustomerId != ''">invitedCustomerId=#{invitedCustomerId,jdbcType=VARCHAR},</if>
            <if test="status != null">status=#{status,jdbcType=INTEGER},</if>
        </set>
        WHERE 1=1
        <if test="id != null and id != ''"> and id = #{id,jdbcType=INTEGER}</if>
          <if test="invitedCustomerId != null and invitedCustomerId != ''"> and invitedCustomerId = #{invitedCustomerId}</if>
          <if test="oldStatus != null and oldStatus != ''"> and status = #{oldStatus}</if>
          
    </update>

    <select id="findSingle" parameterType="java.util.Map" resultType="java.util.Map">
        SELECT * FROM cbh_invitation_temp
        WHERE 1=1
        <if test="id != null and id != ''"> and id = ${id}</if>
        <if test="invitedCustomerOpenID != null and invitedCustomerOpenID != ''"> and invitedCustomerOpenID = #{invitedCustomerOpenID}</if>
    </select>

    <select id="findMore" parameterType="java.util.Map" resultType="java.util.Map">
        SELECT * FROM cbh_invitation_temp
        WHERE 1=1
        <if test="customerId != null and customerId != ''"> and customerId = #{customerId}</if>
        <if test="status != null and status != ''"> and status = #{status}</if>
        <if test="invitedCustomerId != null and invitedCustomerId != ''"> and invitedCustomerId = #{invitedCustomerId}</if>
        ORDER BY createAt DESC
    </select>

</mapper>