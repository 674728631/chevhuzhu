package com.zccbh.demand.service.marketing;

import java.util.HashMap;
import java.util.Map;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;
import org.springframework.transaction.annotation.Propagation;
import org.springframework.transaction.annotation.Transactional;

import com.zccbh.demand.mapper.customer.RecordRechargeMapper;
import com.zccbh.demand.mapper.customer.UserCustomerMapper;
import com.zccbh.demand.mapper.customer.WechatLoginMapper;
import com.zccbh.demand.mapper.event.EventMapper;

/** 
 * @ClassName: MarketingService 
 * @Description: TODO(这里用一句话描述这个类的作用) 
 * @author xiaowuge
 * @date 2018年10月25日 下午4:32:27 
 *  
 */
@Service
@Transactional(propagation = Propagation.SUPPORTS, readOnly = true)
public class MarketingService {
	
	@Autowired
	private WechatLoginMapper wechatLoginMapper;
	@Autowired
	private UserCustomerMapper userCustomerMapper;
	@Autowired
	private RecordRechargeMapper recordRechargeMapper;
	@Autowired
	private EventMapper eventMapper;
	
	@Transactional
	public Map<String, Object> localShow(Map<String, Object> parameMap) throws Exception{
		Map<String, Object> resultMap = new HashMap<>();
		Map<String, Object> concernWeChat = wechatLoginMapper.concernWeChat(parameMap);		
		resultMap.put("weChatConcernNum", concernWeChat.get("concernWeChat"));
		Map<String, Object> userRegister = userCustomerMapper.getRegisterNum(parameMap);
		resultMap.put("registerNum", userRegister.get("registerNum"));
		Map<String, Object> carInfo = wechatLoginMapper.selectObservationAndGuarantee(parameMap);
		resultMap.put("observationNum", carInfo.get("observationNum"));
		resultMap.put("guaranteeNum", carInfo.get("guaranteeNum"));
		Map<String, Object> rechargeInfo = recordRechargeMapper.marketingRecharge(parameMap);
//		resultMap.put("amtRcharge", rechargeInfo.get("amtRcharge"));
		resultMap.put("rechargeNum", rechargeInfo.get("rechargeNum"));
		Map<String, Object> eventResultInfo = eventMapper.eventResult(parameMap);
		resultMap.put("eventMoney", eventResultInfo.get("eventMoney"));
		resultMap.put("eventNum", eventResultInfo.get("eventNum"));
		return resultMap;
	}

}
