"use strict";var _alert_time,_confirm_time,_scroll_time,_switch_time,_push_time,$window=$(window),_reg_bank=new RegExp("^[0-9]{16,21}$"),_reg_color=new RegExp("^#[0-9a-f]{3}$|^#[0-9a-f]{6}$|^rgba\\((\\s*(2[0-4][0-9]|25[0-5]|[01]?[0-9][0-9]?)\\s*,\\s*){3}\\s*(0.[0-9]+|1|0)\\s*\\)$","i"),_reg_car=new RegExp("^(([一-龥][a-zA-Z]|[一-龥]{2}d{2}|[一-龥]{2}[a-zA-Z])[-]?|([wW][Jj][一-龥]{1}[-]?)|([a-zA-Z]{2}))([A-Za-z0-9]{5}|[DdFf][A-HJ-NP-Za-hj-np-z0-9][0-9]{4}|[0-9]{5}[DdFf])$"),_config={website_name:"车V互助",share_img:"http://www.chevhuzhu.com/hfive/img/app_logo_2.jpg",list_cache_time:6e5,is_storage_upport:isStorageSupport(),is_app:!1,is_wx:!1,is_wx_mobile:!1,wx_config:!1,wx_ver:[0],wx_share:["onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ","onMenuShareWeibo","onMenuShareQZone"],lipei_max:1e3},_share_title="车V互助|私家车小擦小刮互助平台",_share_desc="9元起加入爱车互助社群，立享每年1000元维修互助金，85%车主一致的选择！",_share_link="http://www.chevhuzhu.com/hfive/view/index.html",_bank_type={1001:"招商银行",1002:"工商银行",1003:"建设银行",1004:"浦发银行",1005:"农业银行",1006:"民生银行",1009:"兴业银行",1010:"平安银行",1020:"交通银行",1021:"中信银行",1022:"光大银行",1025:"华夏银行",1026:"中国银行",1027:"广发银行",1032:"北京银行",1056:"宁波银行",1066:"邮储银行"},_car_status={1:{name:"待支付",color:"red"},2:{name:"待添加照片",color:"red"},10:{name:"待审核",color:"red"},11:{name:"已通过",color:"green"},12:{name:"未通过",color:"red"},13:{name:"观察期",color:"red"},20:{name:"保障中",color:"green"},30:{name:"已退出计划",color:"gray"},31:{name:"不可用",color:"gray"}},_order_status={1:{name:"审核中",tname:"申请理赔时间",color:"red"},2:{name:"未通过",tname:"审核时间",color:"red"},3:{name:"已通过",tname:"审核时间",color:"green"},4:{name:"待完善",tname:"发起时间",color:"red"},10:{name:"待分单",tname:"申请分单时间",color:"yellow"},11:{name:"待接单",tname:"分单时间",color:"yellow"},12:{name:"待接单",tname:"分单时间",color:"yellow"},21:{name:"待定损",tname:"商家接单时间",color:"yellow"},22:{name:"待定损",tname:"商家接单时间",color:"yellow"},23:{name:"待定损",tname:"商家接单时间",color:"yellow"},31:{name:"待接车",tname:"完成定损时间",color:"red"},41:{name:"待维修",tname:"接车时间",tename:"接车时间",color:"red"},51:{name:"待维修",tname:"接车时间",tename:"接车时间",color:"red"},52:{name:"维修中",tname:"开始维修时间",tename:"接车时间",color:"green"},61:{name:"待交车",tname:"维修完成时间",tename:"接车时间",color:"red"},71:{name:"待评价",tname:"交车时间",tename:"交车时间",color:"red"},81:{name:"投诉中",tname:"投诉时间",tename:"接车时间",color:"red"},100:{name:"已完成",tname:"评价时间",tename:"评价时间",color:"green"}},_baoxian_order_status={1:{name:"待审核",tname:"申请理赔时间",color:"red"},2:{name:"未通过",tname:"审核时间",color:"red"},3:{name:"已通过",tname:"审核时间",color:"green"},4:{name:"待完善",tname:"发起时间",color:"red"},10:{name:"待分单",tname:"申请分单时间",color:"yellow"},11:{name:"待接单",tname:"分单时间",color:"yellow"},12:{name:"待接单",tname:"分单时间",color:"yellow"},21:{name:"待接车",tname:"商家接单时间",color:"yellow"},31:{name:"待定损",tname:"接车时间",color:"yellow"},32:{name:"待确认",tname:"定损时间",color:"yellow"},41:{name:"待维修",tname:"接车时间",tename:"接车时间",color:"red"},42:{name:"维修中",tname:"开始维修时间",tename:"接车时间",color:"green"},51:{name:"待交车",tname:"维修完成时间",tename:"接车时间",color:"red"},61:{name:"待评价",tname:"交车时间",tename:"交车时间",color:"red"},71:{name:"投诉中",tname:"投诉时间",tename:"接车时间",color:"red"},100:{name:"已完成",tname:"评价时间",tename:"评价时间",color:"green"}},_api={newer:"/findJionNew",newmsg:"/findMyMessage",login:"/appLogin",code:"/msm/verificationCode",check_token:"/validationToken",index:"/index",recognition_driver:"/distinguish",add_car1:"/register1",add_car2:"/register2",add_car_chemama:"/chemama/saveCarImg",pay_cars:"/weChatGoPay",car_pay:"/weChatPay",car_pay_test:"/weChatPay1",car_list:"/carList",car_detail:"/carDetail",car_detail_chemama:"/chemama/findChemamaCar",add_license:"/modifyDrivingLicense",add_order:"/compensation",add_baoxian_order:"/order/compensation",order_list:"/compensateList",order_detail:"/goOrderDetail",order_pay:"/paymentRepair",order_pay_test:"/paymentRepair1",order_confirm:"/updateReceivecar",order_report:"/updateComplaint",submit_contacter:"/insertReceivecar",submit_score:"/insertComment",baoxian_order_list:"/order/compensateList",baoxian_order_detail:"/order/goOrderDetail",baoxian_submit_contacter:"/order/insertReceivecar",baoxian_submit_score:"/order/insertComment",baoxian_order_confirm:"/order/comfirmAssert",baoxian_order_pay:"/orderPay",baoxian_order_pay_test:"/order/orderPay1",baoxian_order_report:"/order/updateComplaint",baoxian_publicity_list:"/order/publicity",baoxian_publicity_detail:"/order/publicityDetail",user:"/goUserDetail",user_edit:"/updateUser",user_other:"/getUserInfoById",publicity:"/publicity",publicity_list:"/publicityList",publicity_detail:"/publicityDetail",wallet:"/myAccount",wallet_history:"/getRechargeList",msg_list:"/getMessageList",shop_list:"/getMaintenanceShopList",shop_detail:"/getMaintenanceShopDetail",shop_detail_simple:"/getShopDetail",comment_list:"/getCommentListByMaintenanceShopId",wxjssdk:"/jsInfo",check_follow:"/checkSubscribe",event:"/JoinActivities",share:"/invitationList",share2:"/inviteUser",baojia:"/event/quotation",lottery:"/draw/startDraw",wx_oauth:"/authorize/getOpenid",get_oauth:"/authorize/weixinAuth",carwash_check:"/activities/carwash1RMB",carwash_pay:"/activities/buyCarWashCoupon",carwash_coupon:"/activities/getUserCouponList"};if(window.navigator.userAgent.match(/chevdian|chevhuzhu/i)&&(_config.is_app=!0,$("body").addClass("app-bw")),window.navigator.userAgent.match(/micromessenger/i)){_config.is_wx=!0,($.os.tablet||$.os.phone)&&(_config.is_wx_mobile=!0);var r=window.navigator.userAgent.match(/micromessenger\/([1-9][0-9]*\.[0-9.]*)\s/i);null!=r&&(_config.wx_ver=r[1].split("."))}else _config.is_app||$("body").addClass("no-wx-bw");var juicer_getDays=function(e,t){if("string"===$.type(e)&&/^\d+$/.test(e)||"number"===$.type(e))e=new Date(e);else if("date"!==$.type(e))return"0";t="number"!==$.type(t)?0:Math.floor(t);var r=(e=new Date(e.getFullYear(),e.getMonth(),e.getDate()+t,e.getHours(),e.getMinutes(),e.getSeconds()))-new Date;return r<=0?0:Math.ceil(r/864e5)};juicer.register("build_days",juicer_getDays);var juicer_formatTime=function(e,t){return e?new Date(e).formatDate(t):""};juicer.register("build_time",juicer_formatTime);var juicer_encodeUri=function(e){return encodeURIComponent(e)};juicer.register("build_encodeUri",juicer_encodeUri);var juicer_round=function(e){return"number"!==$.type(e)?"0":Math.round(e)};juicer.register("build_round",juicer_round);var juicer_ceil=function(e){return"number"!==$.type(e)?"0":Math.ceil(e)};juicer.register("build_ceil",juicer_ceil);var juicer_floor=function(e){return"number"!==$.type(e)?"0":Math.floor(e)};juicer.register("build_floor",juicer_floor);var juicer_getCarStatus=function(e){if(!e)return"";var t=_car_status[e];if(!t)return"";var r=t.name;return r||""};juicer.register("build_carStatus",juicer_getCarStatus);var juicer_getCarColor=function(e){if(!e)return"";var t=_car_status[e];if(!t)return"";var r=t.color;return r||""};juicer.register("build_carColor",juicer_getCarColor);var juicer_getOrderStatus=function(e){if(!e)return"全部";var t=_order_status[e];if(!t)return"";var r=t.name;return r||""};juicer.register("build_orderStatus",juicer_getOrderStatus);var juicer_getOrderColor=function(e){if(!e)return"";var t=_order_status[e];if(!t)return"";var r=t.color;return r||""};juicer.register("build_orderColor",juicer_getOrderColor);var juicer_getOrderTime=function(e,t){var r,n=e.statusEvent;return 1==n?r=e.timeApply:2==n||3==n?r=e.timeExamine:4==n?r=e.uploadImgTime:10==n||11==n||12==n?r=e.receiveCreateTime:21==n||22==n||23==n?r=e.assertCreateTime:31==n?r=e.assertEndTime:41==n||51==n?r=e.timePay:52==n?r=e.repairBeginTime:61==n?r=e.repairEndTime:71==n?r=e.timeReceiveCar:81==n?r=e.timeComplaint:100==n&&(r=e.commentTime),r&&(r=r.time),juicer_formatTime(r,t)};juicer.register("build_orderTime",juicer_getOrderTime);var juicer_getOrderTimeName=function(e){if(!e)return"时间";var t=_order_status[e];if(!t)return"时间";var r=t.tname;return r||"时间"};juicer.register("build_orderTimeName",juicer_getOrderTimeName);var juicer_getEventTime=function(e,t){var r,n=e.statusEvent;return 41==n||51==n||52==n||61==n||81==n?r=e.timePay:71==n?r=e.timeReceiveCar:100==n&&(r=e.commentTime),r&&(r=r.time),juicer_formatTime(r,t)};juicer.register("build_eventTime",juicer_getEventTime);var juicer_getBaoxianOrderStatus=function(e){if(!e)return"全部";var t=_baoxian_order_status[e];if(!t)return"";var r=t.name;return r||""};juicer.register("build_baoxianOrderStatus",juicer_getBaoxianOrderStatus);var juicer_getBaoxianOrderColor=function(e){if(!e)return"";var t=_baoxian_order_status[e];if(!t)return"";var r=t.color;return r||""};juicer.register("build_baoxianOrderColor",juicer_getBaoxianOrderColor);var juicer_getBaoxianOrderTime=function(e,t){var r,n=e.status;return 1==n?r=e.applyTime:2==n||3==n?r=e.examineTime:4==n?r=e.uploadImgTime:10==n?r=e.applyDistributionTime:11==n||12==n?r=e.distributionTime:21==n?r=e.receiveOrderTime:31==n?r=e.deliverCarTime:32==n?r=e.assertTime:41==n?r=e.deliverCarTime:42==n?r=e.beginRepairTime:51==n?r=e.endRepairTime:61==n?r=e.takeCarTime:71==n?r=e.complaintTime:100==n&&(r=e.completeTime),r&&(r=r.time),juicer_formatTime(r,t)};juicer.register("build_baoxianOrderTime",juicer_getBaoxianOrderTime);var juicer_getBaoxianOrderTimeName=function(e){if(!e)return"时间";var t=_baoxian_order_status[e];if(!t)return"时间";var r=t.tname;return r||"时间"};juicer.register("build_baoxianOrderTimeName",juicer_getBaoxianOrderTimeName);var juicer_getEventTimeName=function(e){if(!e)return"时间";var t=_order_status[e];if(!t)return"时间";var r=t.tename;return r||"时间"};juicer.register("build_eventTimeName",juicer_getEventTimeName);var juicer_formatHTML=function(e,t,r){var n=e;return r>0&&(n=n.substr(0,r)),t||(n=n.replace(/\r\n|\r|\n/g,"<br>")),n.replace(/\\"/g,'"')};juicer.register("build_content",juicer_formatHTML);var juicer_replace=function(e,t,r){return"string"!==$.type(e)?"":e.replace(t,r)};juicer.register("build_replace",juicer_replace);var juicer_formatDesc=function(e,t){var r=e.replace(/\\"/g,'"').replace(/<\/?.+?\/?>/g,"");return t>0&&(r=r.substr(0,t)),r};juicer.register("build_desc",juicer_formatDesc);var juicer_formatNum=function(e,t,r){var n=parseFloat(e);if("number"===$.type(t)&&(n*=t),0!==n&&"string"===$.type(r)){var i={"万":1e4,"千":1e3,"百":100,k:1e3,K:1e3};n=i[r]&&i[r]<=n?Math.floor(n/i[r]*100)/100+r:Math.floor(100*n)/100}else n=Math.floor(100*n)/100;return n};juicer.register("build_number",juicer_formatNum);var login_coupin=loadStorage("login_coupon"),login_chemama=loadStorage("login_chemama"),login_coupin_event=null;if(login_coupin&&$.isArray(login_coupin)&&login_coupin.length>0){var node="";showConfirm({class:"coupon c2",btn_close:!0,cover_close:!0,node:node=/太平洋保险/.test(login_coupin[0].shopName)?'<img src="/hfive/img/icon_treasure.jpg" style="width:2.64rem"><p class="fsize-14 txt-lv2 p2">恭喜获得 1000元擦刮维修金</p>':'<img src="/hfive/img/icon_treasure.jpg" style="width:2.64rem"><p class="fsize-18 txt-red p1">恭喜您！获得</p><p class="fsize-14 txt-lv2 p2">由'+(login_coupin[0].shopName?login_coupin[0].shopName:"车V互助")+"送出的1000元车辆维修金</p>",btn_yes:{str:"去添加车牌认领",href:"/hfive/view/car_add.html"},event_close:function(){$.isFunction(login_coupin_event)&&login_coupin_event()}}),delStorage("login_coupon")}else login_chemama&&$.isArray(login_chemama)&&login_chemama.length>0?(showConfirm({class:"coupon c2",btn_close:!0,cover_close:!0,node:'<img src="/hfive/img/icon_treasure.jpg" style="width:2.64rem"><p class="fsize-18 txt-red p1">恭喜您！获得</p><p class="fsize-14 txt-lv2 p2">由车妈妈送出的1000元车辆维修金</p>',btn_yes:{str:"朕知道了",href:"/hfive/view/profile.html"},event_close:function(){$.isFunction(login_coupin_event)&&login_coupin_event()}}),delStorage("login_chemama")):$.isFunction(login_coupin_event)&&login_coupin_event();function loginCoupinEvent(e){login_coupin&&$.isArray(login_coupin)&&login_coupin.length>0||!$.isFunction(e)?login_coupin_event=e:e()}function goAPI(e){if(e.url){var t=$.extend({url:null,type:"post",traditional:!1,data:null,success:null,error:null,complete:null,ignore_abort:!1,retry:0,retry_cbk:null},e);return"number"!==$.type(t.retry)&&(t.retry=0),$.ajax({url:t.url,type:t.type,data:t.data,dataType:"json",traditional:t.traditional,headers:{rqSide:"Q0JILUg1"},success:function(e){var r=e;if(r&&200==r.code&&$.isFunction(t.success))t.success(r);else if(r&&200!=r.code){if(388==r.code)return delStorage("user",!0),showConfirm({str:"登录信息已失效，请重新登录",btn_yes:{str:"确定",href:"/hfive/view/login.html?redir="+encodeURIComponent(window.location.href)}}),void hideLoad();if(r&&1e3==r.code)return void goAPI({url:_api.get_oauth,data:{strJson:window.location.href},success:function(e){window.location.href=e.data}});if(t.retry>0){t.retry--;var n=goAPI(t);$.isFunction(t.retry_cbk)&&t.retry_cbk(n)}else $.isFunction(t.error)&&t.error(r.message.trim()||"未知错误",r.code,r)}},error:function(e,r,n){if("abort"===r){if(!t.ignore_abort)if(t.retry>0){t.retry--;var i=goAPI(t);$.isFunction(t.retry_cbk)&&t.retry_cbk(i)}else $.isFunction(t.error)&&t.error("网络连接不可用，请检查网络",-1,{})}else if(t.retry>0){t.retry--;i=goAPI(t);$.isFunction(t.retry_cbk)&&t.retry_cbk(i)}else $.isFunction(t.error)&&t.error("服务器繁忙，请右上角刷新，稍后再试\n错误类型："+r+"("+e.status+")",0,{})},complete:function(e,r){$.isFunction(t.complete)&&t.complete()}})}}function wxOauth(e){goAPI({url:_api.wx_oauth,type:"GET",success:e,error:function(e){showConfirm({str:e,btn_yes:{str:"确定"}})}})}function checkFollow(e){if(!e)return!1;goAPI({url:_api.check_follow,success:function(t){$.isFunction(e.success)&&e.success(t)},error:function(t){$.isFunction(e.fail)&&e.fail(t)},complete:function(){$.isFunction(e.complete)&&e.complete()}})}function checkLogin(e){var t=loadStorage("user",!0);if(t&&t.token)return t;if(e){var r=document.referrer;return r&&saveStorage("from_url",r),window.location.href="/hfive/view/login.html?redir="+encodeURIComponent(window.location.href),!1}return!1}function checkToken(e,t){if(!e)return!1;showLoad(),goAPI({url:_api.check_token,data:{token:e.token,mobileNumber:e.phone},success:function(e){hideLoad(),$.isFunction(t)&&t()},error:function(r){hideLoad(),showConfirm({str:r,btn_yes:{str:"重新加载",event_click:function(){checkToken(e,t)}}})}})}function setDefaultAvatar(e,t){var r=t||"default_avatar_1.png";$(e).attr("src","/hfive/img/"+r)}function setDefaultImg(e,t){t&&$(e).attr("src",t)}function uploadPhoto(e,t,r){var n=0,i=0,o={};for(var a in e)/https?:\/\//i.test(e[a])||(i+=1,o[a]=e[a]),n+=1;0===n?$.isFunction(r)&&r("未找到有效图片"):0===i?$.isFunction(t)&&t(e):goAPI({url:_api.photo_upload,data:$.extend({idCardFront:"",drivingLicense:"",idCardReverse:"",copyDrivingLicense:"",associatorimg:""},e),success:function(r){$.extend(e,r.data),$.isFunction(t)&&t(e)},error:function(e){$.isFunction(r)&&r(e)}})}function checkAuthWX(e){goAPI({url:"/wx/checkauthorize",retry:2,success:function(){$.isFunction(e.success)&&e.success()}})}function configWXJSSDK(e,t){var r=$.extend({success:null,error:null,complete:null,debug:!1},t),n=!0;goAPI({url:_api.wxjssdk,data:{url:encodeURIComponent(window.location.href.replace(/#.*$/,""))},retry:2,success:function(t){t=t.data;wx.config({debug:r.debug,appId:t.appId,timestamp:t.timestamp,nonceStr:t.nonceStr,signature:t.signature,jsApiList:e}),wx.ready(function(){n&&(_config.wx_config=!0),$.isFunction(r.success)&&r.success()}),wx.error(function(e){n=!1,$.isFunction(r.error)&&r.error(e.errMsg)})},error:r.error,complete:r.complete})}function doWXPay(e,t,r){if(!e)return!1;showLoad(),goAPI({url:_api.wxpay,data:{orderNo:e.orderNo,associatorId:e.associatorId},success:function(e){wx.chooseWXPay({appId:e.data.appId,timestamp:e.data.timeStamp.toString(),nonceStr:e.data.nonceStr,package:e.data.package,signType:e.data.signType,paySign:e.data.paySign,success:function(e){$.isFunction(t)&&t()}})},error:function(e){$.isFunction(r)&&r(e)},complete:function(){hideLoad()}})}function shareWX(e,t,r){wx.onMenuShareTimeline({title:e.title,link:e.link,imgUrl:e.imgUrl?e.imgUrl:_config.share_img,success:function(){$.isFunction(t)&&t()},cancel:function(){$.isFunction(r)&&r()}}),wx.onMenuShareAppMessage({title:e.title,desc:e.desc,link:e.link,imgUrl:e.imgUrl?e.imgUrl:_config.share_img,type:e.type?e.type:"link",dataUrl:"link"!=e.type?e.dataUrl:null,success:function(){$.isFunction(t)&&t()},cancel:function(){$.isFunction(r)&&r()}}),wx.onMenuShareQQ({title:e.title,desc:e.desc,link:e.link,imgUrl:e.imgUrl?e.imgUrl:_config.share_img,success:function(){$.isFunction(t)&&t()},cancel:function(){$.isFunction(r)&&r()}}),wx.onMenuShareWeibo({title:e.title,desc:e.desc,link:e.link,imgUrl:e.imgUrl?e.imgUrl:_config.share_img,success:function(){$.isFunction(t)&&t()},cancel:function(){$.isFunction(r)&&r()}}),wx.onMenuShareQZone({title:e.title,desc:e.desc,link:e.link,imgUrl:e.imgUrl?e.imgUrl:_config.share_img,success:function(){$.isFunction(t)&&t()},cancel:function(){$.isFunction(r)&&r()}})}function wxUploadPhoto(e){wx.uploadImage({localId:e.localId,isShowProgressTips:e.isShowProgressTips?e.isShowProgressTips:1,success:function(t){t.serverId;$.isFunction(e.success)&&e.success(t)}})}function getUrlPar(e,t){var r=new RegExp("(&|\\?)"+e+"=([^&]*)(&|$)","i"),n=(t?t.replace(/#.*$/,""):window.location.search).match(r);return null!=n?n[2]:""}function isStorageSupport(){try{return window.sessionStorage.setItem("test","testValue"),window.sessionStorage.removeItem("test"),!0}catch(e){return!1}}function saveStorage(e,t,r){if(!_config.is_storage_upport)return!1;try{var n=JSON.stringify(t);return r?window.localStorage.setItem(e.toString(),n):window.sessionStorage.setItem(e.toString(),n),!0}catch(e){return!1}}function loadStorage(e,t){if(!_config.is_storage_upport)return null;var r=t?window.localStorage.getItem(e.toString()):window.sessionStorage.getItem(e.toString());if(!r)return null;try{return r=JSON.parse(r)}catch(e){return null}}function delStorage(e,t){_config.is_storage_upport&&(t?window.localStorage.removeItem(e):window.sessionStorage.removeItem(e))}function pushMenu(e){var t=$.extend(!0,{title:null,class:null,cover_close:!0,close_str:"取消",data:null,node:null,event_click:null},e),r=!1,n=300,i=500,o='<div id="push-bg"></div><div id="push-layer"><div id="push-top"><div id="push-title"></div><a class="hover" id="push-cancel" href="javascript:;"></a></div><div id="push-box"></div></div>',a=$("body").find("#push-menu");a.length>0?a.removeClass().empty().append(o):(a=$('<div id="push-menu"></div>').append(o),$("body").append(a));var c=a.find("#push-layer"),s=a.find("#push-bg"),l=a.find("#push-title"),u=a.find("#push-box"),d=a.find("#push-cancel");if(d.off("click").on("click",f),"cross"===t.close_str?d.text("＋").addClass("cross"):d.text(t.close_str),t.cover_close?s.off("click").on("click",f):s.off("click"),t.data){e=t.data;if($.isArray(e))if(e.length>0){for(var m=[],_=0,p=e.length;_<p;_++)"string"===$.type(e[_])||"number"===$.type(e[_])?m.push($('<a class="push-item hover" href="javascript:;"></a>').data("value",e[_]).text(e[_])):m.push($('<a class="push-item hover" href="javascript:;"></a>').data("value",e[_].value).text(e[_].name));u.append(m)}else a.addClass("default");else"string"!==$.type(e)&&"number"!==$.type(e)||u.append($('<a class="push-item hover" href="javascript:;"></a>').data("value",e).text(e))}else a.addClass("default");function f(){r||(r=!0,c.removeClass("open"),setTimeout(function(){(new Date).getTime()-_push_time>=n&&(a.addClass("close"),setTimeout(function(){(new Date).getTime()-_push_time>=i+n&&a.removeClass("open close")},i))},n))}t.node&&c.append($('<div id="push-node"></div>').append(t.node)),t.title?l.text(t.title):a.addClass("default"),t.class&&a.addClass(t.class),$.isFunction(t.event_click)?u.off("click").on("click",".push-item",function(){var e=$(this);t.event_click({name:e.text(),value:e.data("value")}),f()}):u.off("click"),_push_time=(new Date).getTime(),a.addClass("open"),setTimeout(function(){c.addClass("open")},n)}function showLoad(e){var t=$.extend(!0,{str:"请稍候",cover:!0,cover_background:null,color:null,data:null,closeable:!1,event_click:null},e);"string"!==$.type(t.str)&&"number"!==$.type(t.str)&&(t.str="");var r=$("body").find("#load-fixed"),n=$('<div id="load-box"></div>').html(t.str.replace(/\r\n|\r|\n/g,"<br>"));r.length>0?r.removeClass().empty().append(n):(r=$('<div id="load-fixed"></div>').append(n),$("body").append(r)),_reg_color.test(t.color)&&r.css("color",t.color),_reg_color.test(t.cover_background)&&r.css("background",t.cover_background),t.cover||r.addClass("nocover"),r.off().on("click",function(){t.closeable&&hideLoad(),$.isFunction(t.event_click)&&t.event_click(t.data)}).css("display","block"),setTimeout(function(){r.addClass("open")},50)}function hideLoad(){var e=$("body").find("#load-fixed");e.length>0&&(e.removeClass("open").addClass("close"),setTimeout(function(){e.css("display","none")},300))}function showAlert(e){var t="";"string"!==$.type(e)&&"number"!==$.type(e)||(t=e);var r=$("body").find("#alert-box");r.length<=0&&(r=$('<div id="alert-box"></div>'),$("body").append(r)),_alert_time=(new Date).getTime();r.removeClass().css({display:"block",left:"0",width:"auto","webkit-transform":"translateX(0) translateY(-50%)",transform:"translateX(0) translateY(-50%)"}).html(t.toString().replace(/\r\n|\r|\n/g,"<br>"));var n=Math.ceil(r.width())+1;Math.ceil(r.height());r.css({left:"50%",width:n,"webkit-transform":"translateX(-50%) translateY(-50%)",transform:"translateX(-50%) translateY(-50%)"}).addClass("open"),$window.width()<750&&r.css({"max-width":"90%"}),setTimeout(function(){(new Date).getTime()-_alert_time>=1500&&(r.removeClass("open").addClass("close"),setTimeout(function(){(new Date).getTime()-_alert_time>=2100&&r.css("display","none")},600))},1500)}function showConfirm(e){var t=$.extend(!0,{str:"",color:null,title:"",title_color:null,background:null,full:!1,cover:!0,cover_close:!1,cover_background:null,node:null,class:"",data:null,event_init:null,event_close:null,btn_close:!1,btn_yes:{str:"确定",color:null,href:null,click_close:!0,event_click:null},btn_no:{str:null,color:null,href:null,click_close:!0,event_click:null},btn_cancel:{str:null,color:null,href:null,click_close:!0,event_click:null}},e);"string"!==$.type(t.str)&&"number"!==$.type(t.str)&&(t.str=""),"string"!==$.type(t.title)&&"number"!==$.type(t.title)&&(t.title="");var r=$('<a id="confirm-btn-yes" class="fbox-cc" href="javascript:"></a>').text(t.btn_yes.str),n=$('<a id="confirm-btn-no" class="fbox-cc" href="javascript:"></a>').text(t.btn_no.str),i=$('<a id="confirm-btn-cancel" class="fbox-cc" href="javascript:"></a>').text(t.btn_cancel.str),o=$('<div id="confirm-txt"></div>').html(t.str.toString().replace(/\r\n|\r|\n/g,"<br>")),a=$('<div id="confirm-title"></div>').html(t.title.toString().replace(/\r\n|\r|\n/g,"<br>"));t.btn_yes.href&&r.attr("href",t.btn_yes.href),t.btn_no.href&&n.attr("href",t.btn_no.href),t.btn_cancel.href&&i.attr("href",t.btn_cancel.href),_reg_color.test(t.color)&&o.css("color",t.color),_reg_color.test(t.title_color)&&a.css("color",t.title_color),_reg_color.test(t.btn_yes.color)&&r.css("color",t.btn_yes.color),_reg_color.test(t.btn_no.color)&&n.css("color",t.btn_no.color),_reg_color.test(t.btn_cancel.color)&&i.css("color",t.btn_cancel.color);var c=$('<div id="confirm-box"></div>');""!=t.str&&c.prepend(o),""!=t.title&&c.prepend(a),t.node&&c.append($('<div id="confirm-node"></div>').append(t.node)),_reg_color.test(t.background)&&c.css("background",t.background);var s=$('<div id="confirm-btn"></div>').append(t.btn_cancel.str?i:null,t.btn_no.str?n:null,t.btn_yes.str?r:null),l=$('<div id="confirm-bg"></div>'),u=$('<div id="confirm-wrap"></div>').append(l,c.append(s)),d=$("body").find("#confirm-layer");if(d.length>0?d.removeClass().empty().append(u):(d=$('<div id="confirm-layer"></div>').append(u),$("body").append(d)),t.cover&&!t.full?u.on("touchmove",function(e){e.preventDefault()}):t.cover||d.addClass("nocover"),_reg_color.test(t.cover_background)&&l.css("background",t.cover_background),t.cover_close&&l.on("click",p),t.btn_close&&c.prepend($('<a id="confirm-btn-close" class="hover" href="javascript:;"></a>').on("click",p)),d.css("display","block").addClass(t.class),t.full)d.addClass("full");else{c.css({left:"0",width:"auto","webkit-transform":"translateX(0) translateY(-50%)",transform:"translateX(0) translateY(-50%)"});var m=Math.ceil(c.width()/$window.width()*100);c.css({left:"50%",width:m+"%","webkit-transform":"translateX(-50%) translateY(-50%)",transform:"translateX(-50%) translateY(-50%)"}),$window.width()<750&&c.css({"max-width":"90%"})}d.addClass("open"),$.isFunction(t.event_init)&&t.event_init(t.data,t.node),_confirm_time=(new Date).getTime();var _=400;function p(){d.removeClass("open").addClass("close"),setTimeout(function(){(new Date).getTime()-_confirm_time>=_&&(d.css("display","none"),$.isFunction(t.event_close)&&t.event_close())},_)}t.btn_yes.str&&("string"!==$.type(t.btn_yes.str)&&"number"!==$.type(t.btn_yes.str)&&r.text("确定"),r.off().on("click",function(){t.btn_yes.click_close&&p(),$.isFunction(t.btn_yes.event_click)&&t.btn_yes.event_click(t.data,t.node)})),t.btn_no.str&&("string"!==$.type(t.btn_no.str)&&"number"!==$.type(t.btn_no.str)&&n.text("否"),n.off().on("click",function(){t.btn_no.click_close&&p(),$.isFunction(t.btn_no.event_click)&&t.btn_no.event_click(t.data,t.node)})),t.btn_cancel.str&&("string"!==$.type(t.btn_cancel.str)&&"number"!==$.type(t.btn_cancel.str)&&i.text("取消"),i.off().on("click",function(){t.btn_cancel.click_close&&p(),$.isFunction(t.btn_cancel.event_click)&&t.btn_cancel.event_click(t.data,t.node)}))}function hideConfirm(){var e=$("body").find("#confirm-layer");if(e.length>0){e.removeClass("open").addClass("close"),setTimeout(function(){(new Date).getTime()-_confirm_time>=400&&e.css("display","none")},400)}}function resetImg(e,t){var r=$(e),n="100%",i="100%",o=0,a=0,c=r.width(),s=r.height(),l=r.parent().width(),u=r.parent().height(),d=l/c,m=u/s;"fix"===t?d<=m?(a=(1-(i=s*d/u))/2,i=Math.round(1e4*i)/100+"%",a=Math.round(1e4*a)/100+"%"):(o=(1-(n=c*m/l))/2,n=Math.round(1e4*n)/100+"%",o=Math.round(1e4*o)/100+"%"):"width"===t?(a=(1-(i=s*d/u))/2,i=Math.round(1e4*i)/100+"%",a=Math.round(1e4*a)/100+"%"):"height"===t?(o=(1-(n=c*m/l))/2,n=Math.round(1e4*n)/100+"%",o=Math.round(1e4*o)/100+"%"):"full"===t?(n="100%",i="100%",o="0",a="0"):d>=m?(a=(1-(i=s*d/u))/2,i=Math.round(1e4*i)/100+"%",a=Math.round(1e4*a)/100+"%"):(o=(1-(n=c*m/l))/2,n=Math.round(1e4*n)/100+"%",o=Math.round(1e4*o)/100+"%"),r.css({width:n,height:i,left:o,top:a,opacity:1})}function resizeImg(e){var t=$.extend({},{width:800,quality:.8},e);lrz(e.file,{width:t.width,quality:t.quality}).then(function(e){return $.isFunction(t.complete)&&t.complete(),$.isFunction(t.success)&&t.success(e),$.isFunction(t.always)&&t.always(),e}).catch(function(e){console.error(e),$.isFunction(t.complete)&&t.complete(),$.isFunction(t.fail)&&t.fail(),$.isFunction(t.always)&&t.always()})}function setTitle(e){if($.os.ios){document.title=e;var t=$('<iframe src="/favicon.ico"></iframe>');t.on("load",function(){setTimeout(function(){t.off("load").remove()},0)}).appendTo($("body"))}else $("title").html(e)}function validateCar(e){return!!_reg_car.test(e)}function validatePhone(e,t){return!!(t?new RegExp("^1[3-9][0-9]{9}$"):new RegExp("^1[3-9][0-9]{9}$|^[0-9]{3}[\\s-]?[0-9]{8}$|^[0-9]{4}[\\s-]?[0-9]{7}$")).test(e)}function validateID(e){if(!e)return!1;if(/^[1-9][0-9]{14}$/.test(e))return!0;if(/^[1-9][0-9]{16}[0-9xX]$/.test(e)){e=e.split("");for(var t=[7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2],r=[1,0,"X",9,8,7,6,5,4,3,2],n=0,i=0;i<17;i++)n+=e[i]*t[i];return r[n%11]==e[17].toUpperCase()}return!1}function formatHTML(e){try{var t={"\r\n":"<br>","\r":"<br>","\n":"<br>",'\\"':'"',"+":" "};return e.replace(/\r\n|\r|\n|\\"|\+/g,function(e){var r=t[e];return null!=r?r:""})}catch(t){return e}}function toDate(e){var t=new Date(e);return"Invalid Date"===t.toString()&&/^[0-9]{8}$/.test(e)&&(t=new Date(e.substr(0,4)+"-"+e.substr(4,2)+"-"+e.substr(6))),"Invalid Date"===t.toString()?null:t}$.fn.showLoad=function(e){var t="载入中...";"string"!==$.type(e)&&"number"!==$.type(e)||(t=e.replace(/\r\n|\r|\n/g,"<br>"));var r=this.find(".load-box");return r.length>0?r.html(t).show():this.append($('<div class="load-box"></div>').html(t)),this},$.fn.hideLoad=function(){var e=this.find(".load-box");return e.length>0&&e.hide(),this},$.fn.showRefresh=function(e){var t=$.extend({str:"",color:null,node:null,btn:{str:null,color:null,background:null,event_click:null}},e);"string"!==$.type(t.str)&&"number"!==$.type(str)||(t.str=t.str.toString().replace(/\r\n|\r|\n/g,"<br>"));var r=this.find(".refresh-box");if(r.length>0?r.empty().append($("<p></p>").html(t.str)).show():(r=$('<div class="refresh-box"></div>').append($("<p></p>").html(t.str)),this.append(r)),t.node&&r.prepend($('<div class="refresh-node"></div>').append(t.node)),_reg_color.test(t.color)&&r.css("color",t.color),t.btn.str){"string"!==$.type(t.btn.str)&&"number"!==$.type(t.btn.str)&&(t.btn.str="点击重新加载");var n={};_reg_color.test(t.btn.color)&&(n.color=t.btn.color),_reg_color.test(t.btn.background)&&(n.background=t.btn.background);var i=$('<a href="javascript:" class="btn-refresh hover"></a>').css(n).html(t.btn.str).on("click",function(){$.isFunction(t.btn.event_click)&&t.btn.event_click()});r.append(i)}return this},$.fn.hideRefresh=function(){var e=this.find(".refresh-box");return e.length>0&&e.hide(),this},$.fn.insertImg=function(e,t){var r=this,n=new Image;return n.onload=function(){n.onload=null;var e="100%",i="100%",o=0,a=0,c=n.width,s=n.height,l=r.width(),u=r.height(),d=l/c,m=u/s;"fix"===t?d<=m?(a=(1-(i=s*d/u))/2,i=Math.round(1e4*i)/100+"%",a=Math.round(1e4*a)/100+"%"):(o=(1-(e=c*m/l))/2,e=Math.round(1e4*e)/100+"%",o=Math.round(1e4*o)/100+"%"):"width"===t?(a=(1-(i=s*d/u))/2,i=Math.round(1e4*i)/100+"%",a=Math.round(1e4*a)/100+"%"):"height"===t?(o=(1-(e=c*m/l))/2,e=Math.round(1e4*e)/100+"%",o=Math.round(1e4*o)/100+"%"):"full"===t?(e="100%",i="100%",o="0",a="0"):d>=m?(a=(1-(i=s*d/u))/2,i=Math.round(1e4*i)/100+"%",a=Math.round(1e4*a)/100+"%"):(o=(1-(e=c*m/l))/2,e=Math.round(1e4*e)/100+"%",o=Math.round(1e4*o)/100+"%"),n.style.width=e,n.style.height=i,n.style.left=o,n.style.top=a,n.style.opacity="1"},n.src=e,r.append(n)},$.fn.initNumberBox=function(e){var t=$.extend({value:0,max:0,input:!0,event_change:null},e);return"number"!==$.type(t.max)&&(t.max=0),this.each(function(){var e=0,r=$('<div class="num-typebox"></div>'),n=$(this).on("blur",function(){e<=0&&(e=1,n.val(e),$.isFunction(t.event_change)&&t.event_change(e))});function i(){var r=n.val().replace(/\s/g,"");if(r.length>0)try{var i=parseInt(r);i!=e?(i>0&&(t.max>0&&i<=t.max||t.max<=0)?e=i:t.max&&i>t.max?(e=t.max,n.val(e)):(e=1,n.val(e)),$.isFunction(t.event_change)&&t.event_change(e)):n.val(e)}catch(r){1!=e&&$.isFunction(t.event_change)&&t.event_change(e),e=1,n.val(e)}else e=0,$.isFunction(t.event_change)&&t.event_change(e)}if(t.input||n.prop("readonly","true"),void 0===n[0].oninput?n[0].onpropertychange=i:n.on("input",i),t.value||n.attr("value"))try{var o=parseInt(t.value||n.attr("value"));e=o>0&&(t.max>0&&o<=t.max||t.max<=0)?o:t.max&&o>t.max?t.max:1,n.val(e)}catch(t){e=1,n.val(e)}else e=1,n.val(e);var a=$('<a class="num-minus hover" href="javascript:">-</a>').on("click",function(){e>1&&(e--,n.val(e),$.isFunction(t.event_change)&&t.event_change(e))}),c=$('<a class="num-plus hover" href="javascript:">+</a>').on("click",function(){(t.max>0&&e<t.max||t.max<=0)&&(e++,n.val(e),$.isFunction(t.event_change)&&t.event_change(e))});n.after(r.append(a,c)).appendTo(r)})},Date.prototype.formatDate=function(e){if("string"!==$.type(e))return this.toString();try{var t=this.getFullYear().toString(),r=this.getMonth()+1,n=r>9?r:"0"+r,i=this.getDate(),o=i>9?i:"0"+i,a=this.getHours(),c=a>9?a:"0"+a,s=this.getMinutes(),l=s>9?s:"0"+s,u=this.getSeconds(),d=u>9?u:"0"+u,m={yyyy:t,yyy:t.substr(1),yy:t.substr(2),y:t.substr(3),MM:n,M:r.toString(),dd:o,d:i.toString(),hh:c,h:a.toString(),mm:l,m:s,ss:d,s:u,"年":"年","月":"月","日":"日","时":"时","分":"分","秒":"秒",":":":","：":"：","-":"-","－":"－",".":".","\\":"\\","/":"/"," ":" ","　":"　"},_=new RegExp("y+|M+|d+|h+|m+|s+|年|月|日|时|分|秒-|.|\\|/|.","g");return _.test(e)?e.replace(_,function(e){var t=m[e];return null!=t?t:""}):this.toString()}catch(e){return this.toString()}},Array.prototype.insertAt=function(e,t){e<0&&(e=0),e>this.length&&(e=this.length),this.length++;for(var r=this.length-1;r>e;r--)this[r]=this[r-1];this[e]=t},Array.prototype.append=function(e){if($.isArray(e))for(var t=this.length,r=0,n=e.length;r<n;r++)this[t]=e[r],t++};